<?xml version="1.0" encoding="utf-8"?>
<!--
  Copyright 2018 Barroux Abbey (https://www.barroux.org/)
  @author: Alexis de Lattre <alexis.delattre@akretion.com>
  License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
-->

<odoo>

<data noupdate="0">

<record id="fruit_operator" model="res.groups">
    <field name="name">Fruit Mill Operator</field>
</record>

</data>


<data noupdate="1">

<!-- Operator RULES -->

<record id="fruit_operator_partner_rule" model="ir.rule">
    <field name="name">Fruit operator restricted to fruit farmers</field>
    <field name="model_id" ref="base.model_res_partner"/>
    <field name="groups" eval="[(4, ref('fruit_operator'))]"/>
    <field name="domain_force">[('fruit_farmer', '=', True)]</field>
</record>

<record id="fruit_operator_product_template_rule" model="ir.rule">
    <field name="name">Fruit operator restricted to fruit products</field>
    <field name="model_id" ref="product.model_product_template"/>
    <field name="groups" eval="[(4, ref('fruit_operator'))]"/>
    <field name="domain_force">[('fruit_type', '!=', False)]</field>
</record>

<record id="fruit_operator_stock_warehouse_rule" model="ir.rule">
    <field name="name">Fruit operator restricted to fruit warehouse</field>
    <field name="model_id" ref="stock.model_stock_warehouse"/>
    <field name="groups" eval="[(4, ref('fruit_operator'))]"/>
    <field name="domain_force">[('fruit_mill', '=', True)]</field>
</record>



<!-- Multi-company rules -->

<record id="fruit_season_multicompany_rule" model="ir.rule">
    <field name="name">Fruit season multi-company</field>
    <field name="model_id" ref="model_fruit_season"/>
    <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'child_of', [user.company_id.id])]</field>
</record>

<record id="fruit_cultivation_multicompany_rule" model="ir.rule">
    <field name="name">Fruit cultivation multi-company</field>
    <field name="model_id" ref="model_fruit_cultivation"/>
    <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'child_of', [user.company_id.id])]</field>
</record>

<record id="fruit_palox_multicompany_rule" model="ir.rule">
    <field name="name">Fruit Palox multi-company</field>
    <field name="model_id" ref="model_fruit_palox"/>
    <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'child_of', [user.company_id.id])]</field>
</record>

<record id="fruit_palox_borrow_history_multicompany_rule" model="ir.rule">
    <field name="name">Fruit Palox Borrow History multi-company</field>
    <field name="model_id" ref="model_fruit_palox_borrow_history"/>
    <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'child_of', [user.company_id.id])]</field>
</record>

<record id="fruit_lended_case_multicompany_rule" model="ir.rule">
    <field name="name">Fruit lended cases multi-company</field>
    <field name="model_id" ref="model_fruit_lended_case"/>
    <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'child_of', [user.company_id.id])]</field>
</record>

<record id="partner_organic_certification_multicompany_rule" model="ir.rule">
    <field name="name">Partner Organic certification multi-company</field>
    <field name="model_id" ref="model_partner_organic_certification"/>
    <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'child_of', [user.company_id.id])]</field>
</record>

<record id="fruit_preseason_poll_rule" model="ir.rule">
    <field name="name">Fruit Pre-season Poll multi-company</field>
    <field name="model_id" ref="model_fruit_preseason_poll"/>
    <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'child_of', [user.company_id.id])]</field>
</record>

<record id="fruit_appointment_multicompany_rule" model="ir.rule">
    <field name="name">Fruit Appointment multi-company</field>
    <field name="model_id" ref="model_fruit_appointment"/>
    <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'child_of', [user.company_id.id])]</field>
</record>

<record id="fruit_arrival_multicompany_rule" model="ir.rule">
    <field name="name">Fruit Arrival multi-company</field>
    <field name="model_id" ref="model_fruit_arrival"/>
    <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'child_of', [user.company_id.id])]</field>
</record>

<record id="fruit_juice_production_multicompany_rule" model="ir.rule">
    <field name="name">Fruit Juice Production multi-company</field>
    <field name="model_id" ref="model_fruit_juice_production"/>
    <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'child_of', [user.company_id.id])]</field>
</record>

<record id="fruit_sale_pricelist_rule" model="ir.rule">
    <field name="name">Fruit Sale Pricelist multi-company</field>
    <field name="model_id" ref="model_fruit_sale_pricelist"/>
    <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'child_of', [user.company_id.id])]</field>
</record>

<record id="fruit_juice_analysis_rule" model="ir.rule">
    <field name="name">Fruit Juice Analysis multi-company</field>
    <field name="model_id" ref="model_fruit_juice_analysis"/>
    <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'child_of', [user.company_id.id])]</field>
</record>


</data>
</odoo>
